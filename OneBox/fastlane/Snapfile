# Snapfile - Fastlane Screenshot Configuration for Vault PDF
# https://docs.fastlane.tools/actions/snapshot/

# Devices to screenshot (App Store required sizes - use valid simulator names)
devices([
  "iPhone 17 Pro Max",       # 6.7" display - Required for App Store
  "iPhone 17 Pro"            # 6.1" display - Required for App Store
])

# Languages
languages(["en-US"])

# Xcode scheme - must match your Xcode project scheme name
scheme("OneBox")

# Run only screenshot tests (comment out if you want to run all UI tests)
# Make sure this matches your actual test target name in Xcode
only_testing(["OneBoxUITests/ScreenshotTests"])

# Output location
output_directory("./fastlane/screenshots")

# Clear old screenshots before generating new ones
clear_previous_screenshots(true)

# Override status bar to show 9:41, full battery, full signal
override_status_bar(true)

# Use dark mode (matches Vault PDF premium aesthetic)
dark_mode(true)

# Skip HTML summary (set to true if you just want images)
skip_open_summary(false)

# Stop after first failure (set to true for debugging)
stop_after_first_error(false)

# Concurrent simulators (faster but uses more RAM)
concurrent_simulators(false)

# Reinstall app before taking screenshots (clean state)
reinstall_app(true)

# Erase simulator before running (fresh state - slower but more reliable)
erase_simulator(false)

# Launch arguments passed to the app
launch_arguments([
  "-screenshots",
  "-uitesting"
])

# Number of retry attempts for failed screenshots
number_of_retries(2)

# Don't run headless - show simulator window (helps with debugging)
headless(false)

# Xcode project (uncomment and adjust if needed)
# project("OneBox.xcodeproj")

# Or use workspace
# workspace("OneBox.xcworkspace")
